"use strict";(self["webpackChunkpms"]=self["webpackChunkpms"]||[]).push([[461],{3461:function(e,a,l){l.r(a),l.d(a,{default:function(){return k}});var o=l(3396),n=l(9242),t=l(3311),s=l(2483),u=l(4870);const c={id:"login-page",class:"login-dark fixed-top",style:{"backdrop-filter":"blur(10px)"}},r={method:"post",style:{background:"rgba(15,25,35,0.9)"}},i=(0,o._)("div",{class:"illustration"},[(0,o._)("i",{class:"icon ion-ios-locked-outline"})],-1),d={class:"mb-3"},p=["onKeyup"],v={class:"mb-3"},m=["onKeyup"];var b={__name:"LoginView",setup(e){const a=(0,u.iH)(""),l=(0,u.iH)(""),b=(0,u.iH)(""),g=(0,u.iH)(""),k=(0,s.tv)();async function y(){if(""===g.value)return void(b.value="請輸入學號");if(""===l.value)return void(b.value="請輸入密碼");g.value=g.value.toUpperCase(),a.value=(0,t.Hi)(l.value);const e=await(0,t.sv)(g.value,a.value);e["access"]||(b.value="伺服器內部錯誤: 500"),e.access?(localStorage["nid"]=g.value.toLocaleUpperCase(),localStorage["token"]=e.token["x-access-token"],await(0,t.E6)(),k.replace("/dashboard")):b.value="學號或密碼不正確"}return(0,o.bv)((async()=>{if((0,t.Fc)()){const e=await(0,t.YM)();e.access?k.go(-1):(localStorage["nid"]=null,localStorage["token"]=null,k.replace("/"))}})),(e,a)=>{const t=(0,o.up)("AlertBlock");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("section",c,[(0,o._)("form",r,[i,(0,o._)("div",d,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>g.value=e),onKeyup:(0,n.D2)(y,["enter"]),id:"nid",class:"form-control",type:"text",name:"nid",placeholder:"學號",style:{"border-bottom-color":"rgb(112,128,146)"}},null,40,p),[[n.nr,g.value]])]),(0,o._)("div",v,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>l.value=e),onKeyup:(0,n.D2)(y,["enter"]),id:"login_password",autocomplete:"",class:"form-control",type:"password",name:"password",placeholder:"Password"},null,40,m),[[n.nr,l.value]])]),(0,o._)("div",{class:"mb-3"},[(0,o._)("button",{onClick:y,class:"btn btn-primary d-block w-100",type:"button"},"登入")])])]),(0,o.Wm)(t,{message:b.value,onCloseBlock:a[2]||(a[2]=e=>b.value="")},null,8,["message"])])}}};const g=b;var k=g}}]);
//# sourceMappingURL=461.7f01b69e.js.map