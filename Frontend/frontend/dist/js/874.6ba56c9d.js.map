{"version":3,"file":"js/874.6ba56c9d.js","mappings":"66BAyDI,IAAIA,EAAQC,EAIZ,MAAMC,GAAgBC,EAAAA,EAAAA,IAAIH,EAAMI,kBAChCC,QAAQC,IAAIN,EAAMI,kBAElB,MAAMG,GAAWJ,EAAAA,EAAAA,IAAI,IACfK,GAAUL,EAAAA,EAAAA,IAAI,CAChB,CACIM,KAAM,KACNC,MAAO,OACPC,UAAU,KAIZC,GAASC,EAAAA,EAAAA,MACTC,EAAcF,EAAOG,aAAaL,MAAMM,OAAOC,UAC/CC,EAAiBN,EAAOG,aAAaL,MAAMM,OAAOG,aAExD,SAASC,EAAeC,GACpB,MAAMC,EAAQD,EAAME,OAAOD,MAC3B,IAAK,MAAME,KAAKF,EACZf,EAASG,MAAMe,KAAK,CAChB,KAAQD,EAAEE,KACV,KAAQF,GAGpB,CAEA,SAASG,IACLpB,EAASG,MAAQ,EACrB,CAEA,SAASkB,EAAWP,GAChBA,EAAMQ,iBACN,MAAMP,EAAQD,EAAMS,aAAaR,MAEjCS,EAAoBT,EACxB,CAEA,SAASS,EAAoBT,GACzB,IAAK,MAAME,KAAKF,EACZf,EAASG,MAAMe,KAAK,CAChB,KAAQD,EAAEE,KACV,KAAQF,GAGpB,CAEA,SAASQ,IACL,IAAK,MAAMR,KAAKjB,EAASG,OACrBuB,EAAAA,EAAAA,IAAiBnB,EAAaI,EAAgBM,EAAEE,KAAMF,EAAEU,MAE5DtB,EAAOa,KAAM,YAAWX,eAC5B,C,+7BC7GJ,MAAMqB,EAAc,EAEpB,O","sources":["webpack://pms/./src/components/Assignment/SubmitView.vue","webpack://pms/./src/components/Assignment/SubmitView.vue?50e9"],"sourcesContent":["<template>\r\n    <div\r\n    @dragover.prevent\r\n    @dragenter.prevent\r\n    @dragleave.prevent\r\n    @drop=\"handleDrop\">\r\n    <div class=\"card shadow my-3\">\r\n        <div class=\"card-header py-3\">\r\n            <p class=\"text-primary m-0 fw-bold\" style=\"font-size: 28px;\">上載檔案</p>\r\n        </div>\r\n        <div class=\"card-body\">\r\n            <div class=\"row\">\r\n                <div class=\"col\">\r\n                        <div class=\"row\">\r\n                            <div class=\"col col-4\">\r\n                                <p style=\"font-size: 24px;\">作業文件</p>\r\n                            </div>\r\n                            <div class=\"col\">\r\n                                <input class=\"form-control shadow-none\" type=\"file\" @change=\"onFileSelected\" multiple :accept=\"allowedFormat\">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <br />\r\n                <div class=\"col\">\r\n                    <EasyDataTable\r\n                    :headers=\"headers\"\r\n                    :items=\"fileList\"\r\n                    table-class-name=\"customize-table\"\r\n                    show-index  alternating />\r\n                </div>\r\n                <br>\r\n                <div class=\"row\">\r\n                    <div class=\"col\" style=\"text-align: left;\">\r\n                        <div>\r\n                            <label>您可以將文件拖放到此處</label>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"col\" style=\"text-align: right;\">\r\n                        <button class=\"btn btn-primary shadow-none\" type=\"button\" @click=\"submitAssignment\">\r\n                            <i class=\"icon ion-android-upload\"></i>上載\r\n                        </button>\r\n                        <button class=\"btn btn-primary shadow-none mx-1\" type=\"button\" @click=\"deleteAll\">\r\n                            <i class=\"icon ion-android-delete\"></i>清除所有\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n    import { uploadAssignment } from \"@/assets/js/helper.js\"\r\n    import { useRouter } from \"vue-router\"\r\n    import { ref } from \"vue\"\r\n\r\n    let props = defineProps({\r\n        allowedFileTypes: String\r\n    })\r\n\r\n    const allowedFormat = ref(props.allowedFileTypes)\r\n    console.log(props.allowedFileTypes)\r\n\r\n    const fileList = ref([])\r\n    const headers = ref([\r\n        {\r\n            text: \"作業\",\r\n            value: \"name\",\r\n            sortable: true\r\n        },\r\n    ])\r\n\r\n    const router = useRouter()\r\n    const projectUUID = router.currentRoute.value.params.projectID\r\n    const assignmentUUID = router.currentRoute.value.params.assignmentID\r\n\r\n    function onFileSelected(event) {\r\n        const files = event.target.files\r\n        for (const i of files) {\r\n            fileList.value.push({\r\n                \"name\": i.name,\r\n                \"file\": i,\r\n            })\r\n        }\r\n    }\r\n\r\n    function deleteAll() {\r\n        fileList.value = []\r\n    }\r\n\r\n    function handleDrop(event) {\r\n        event.preventDefault();\r\n        const files = event.dataTransfer.files;\r\n\r\n        processDroppedFiles(files);\r\n    }\r\n\r\n    function processDroppedFiles(files) {\r\n        for (const i of files) {\r\n            fileList.value.push({\r\n                \"name\": i.name,\r\n                \"file\": i,\r\n            })\r\n        }\r\n    }\r\n\r\n    function submitAssignment() {\r\n        for (const i of fileList.value) {\r\n            uploadAssignment(projectUUID, assignmentUUID, i.name, i.file)\r\n        }\r\n        router.push(`/project/${projectUUID}/assignment`)\r\n    }\r\n</script>","import script from \"./SubmitView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./SubmitView.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["props","__props","allowedFormat","ref","allowedFileTypes","console","log","fileList","headers","text","value","sortable","router","useRouter","projectUUID","currentRoute","params","projectID","assignmentUUID","assignmentID","onFileSelected","event","files","target","i","push","name","deleteAll","handleDrop","preventDefault","dataTransfer","processDroppedFiles","submitAssignment","uploadAssignment","file","__exports__"],"sourceRoot":""}