{"version":3,"file":"js/103.587f9329.js","mappings":"qvCAsFI,MAAMA,GAAsBC,EAAAA,EAAAA,IAAI,IAC1BC,GAAoBD,EAAAA,EAAAA,IAAI,IAExBE,GAAcF,EAAAA,EAAAA,IAAI,IAElBG,GAAYH,EAAAA,EAAAA,IAAI,IAChBI,GAAUJ,EAAAA,EAAAA,IAAI,IAEdK,GAAUL,EAAAA,EAAAA,IAAI,IACdM,GAAON,EAAAA,EAAAA,IAAI,IAEXO,GAASC,EAAAA,EAAAA,MAEfC,eAAeC,IAEX,GAAIC,KAAKC,MAAMT,EAAUU,OAASF,KAAKC,MAAMR,EAAQS,OAEjD,YADAR,EAAQQ,MAAQ,UAGpB,GAAIF,KAAKC,MAAMb,EAAoBc,OAASF,KAAKC,MAAMX,EAAkBY,OAErE,YADAR,EAAQQ,MAAQ,YAIpB,IAAKX,EAAYW,QAAUP,EAAKO,QAAUV,EAAUU,QAAUT,EAAQS,QAAUd,EAAoBc,QAAUZ,EAAkBY,MAE5H,YADAR,EAAQQ,MAAQ,UAGpB,MAAMC,QAAeC,EAAAA,EAAAA,IACjBb,EAAYW,MACZP,EAAKO,MACLV,EAAUU,MACVT,EAAQS,MACRd,EAAoBc,MACpBZ,EAAkBY,OAEI,KAAtBC,EAAOE,YAKXT,EAAOU,IAAI,GAJPZ,EAAQQ,MAAQ,sBAAwBC,EAAO,oBAKvD,C,85EC7HJ,MAAMI,EAAc,EAEpB,O","sources":["webpack://pms/./src/components/Subject/NewView.vue","webpack://pms/./src/components/Subject/NewView.vue?ff5a"],"sourcesContent":["s<template>\r\n    <div>\r\n        <div class=\"card shadow my-3\">\r\n            <div class=\"card-header py-3\">\r\n                <p class=\"text-primary m-0 fw-bold\" style=\"font-size: 28px;\">{{ $route.name }}</p>\r\n            </div>\r\n            <div class=\"card-body\">\r\n                <form>\r\n                    <div class=\"container mw-100 h-100\">\r\n                        <div class=\"row mb-1\">\r\n                            <div class=\"col col-4\">\r\n                                <p style=\"font-size: 24px;\">專案名稱</p>\r\n                            </div>\r\n                            <div class=\"col\">\r\n                                <input class=\"shadow-none form-control w-100\" type=\"text\" :class=\"!projectName ? 'alert-danger': ''\" v-model=\"projectName\">\r\n                                <span :style=\"projectName ? 'visibility:hidden': ''\" class=\"tooltiptext\">*必需項目</span>\r\n\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row\">\r\n                            <div class=\"col col-4\">\r\n                                <p style=\"font-size: 24px;\">年度</p>\r\n                            </div>\r\n                            <div class=\"col\">\r\n                                <input class=\"shadow-none form-control w-100\" type=\"number\" :class=\"!year ? 'alert-danger': ''\" v-model=\"year\">\r\n                                <span :style=\"year ? 'visibility:hidden': ''\" class=\"tooltiptext\">*必需項目</span>\r\n\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row\">\r\n                            <div class=\"col col-4\">\r\n                                <p style=\"font-size: 24px;\">起始日期</p>\r\n                            </div>\r\n                            <div class=\"col\">\r\n                                <input class=\"shadow-none form-control w-100\" type=\"date\" :class=\"!startDate ? 'alert-danger': ''\" v-model=\"startDate\">\r\n                                <span :style=\"startDate ? 'visibility:hidden': ''\" class=\"tooltiptext\">*必需項目</span>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row\">\r\n                            <div class=\"col col-4\">\r\n                                <p style=\"font-size: 24px;\">結束日期</p>\r\n                            </div>\r\n                            <div class=\"col\">\r\n                                <input class=\"shadow-none form-control w-100\" type=\"date\" :class=\"!endDate ? 'alert-danger': ''\" v-model=\"endDate\">\r\n                                <span :style=\"endDate ? 'visibility:hidden': ''\" class=\"tooltiptext\">*必需項目</span>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row\">\r\n                            <div class=\"col col-4\">\r\n                                <p style=\"font-size: 24px;\">結算起始日期<br></p>\r\n                            </div>\r\n                            <div class=\"col\">\r\n                                <input class=\"shadow-none form-control w-100\" type=\"date\" :class=\"!settlementStartDate ? 'alert-danger': ''\" v-model=\"settlementStartDate\">\r\n                                <span :style=\"settlementStartDate ? 'visibility:hidden': ''\" class=\"tooltiptext\">*必需項目</span>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row\">\r\n                            <div class=\"col col-4\">\r\n                                <p style=\"font-size: 24px;\">結算結束日期<br></p>\r\n                            </div>\r\n                            <div class=\"col\">\r\n                                <input class=\"shadow-none form-control w-100\" type=\"date\" :class=\"!settlementEndDate ? 'alert-danger': ''\" v-model=\"settlementEndDate\">\r\n                                <span :style=\"settlementEndDate ? 'visibility:hidden': ''\" class=\"tooltiptext\">*必需項目</span>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row\">\r\n                            <div class=\"col\" style=\"text-align: right;\">\r\n                                <button class=\"btn btn-primary shadow-none\" type=\"button\" @click=\"submitForm\">\r\n                                    <i class=\"fa fa-save\"></i>\r\n                                    &nbsp;保存\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n        <AlertBlock :message=\"message\" @closeBlock=\"message=``\" />\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n    import { createSubject } from \"@/assets/js/helper.js\"\r\n    import { useRouter } from \"vue-router\"\r\n    import { ref } from \"vue\"\r\n\r\n    const settlementStartDate = ref(\"\")\r\n    const settlementEndDate = ref(\"\")\r\n\r\n    const projectName = ref(\"\")\r\n\r\n    const startDate = ref(\"\")\r\n    const endDate = ref(\"\")\r\n\r\n    const message = ref(\"\")\r\n    const year = ref(\"\")\r\n\r\n    const router = useRouter()\r\n\r\n    async function submitForm() {\r\n\r\n        if (Date.parse(startDate.value) > Date.parse(endDate.value)) {\r\n            message.value = \"日期範圍錯誤\"\r\n            return\r\n        }\r\n        if (Date.parse(settlementStartDate.value) > Date.parse(settlementEndDate.value)) {\r\n            message.value = \"結算日期範圍錯誤\"\r\n            return\r\n        }\r\n\r\n        if (!projectName.value || !year.value || !startDate.value || !endDate.value || !settlementStartDate.value || !settlementEndDate.value) {\r\n            message.value = \"未填必需項目\"\r\n            return\r\n        }\r\n        const status = await createSubject(\r\n            projectName.value,\r\n            year.value,\r\n            startDate.value,\r\n            endDate.value,\r\n            settlementStartDate.value,\r\n            settlementEndDate.value\r\n        )\r\n        if (status.status_code == 400) {\r\n            message.value = \"SQLInjectionCheck: \" + status[\"SQLInjectionCheck\"]\r\n            return\r\n        }\r\n\r\n        router.go(-1)\r\n    }\r\n</script>","import script from \"./NewView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./NewView.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["settlementStartDate","ref","settlementEndDate","projectName","startDate","endDate","message","year","router","useRouter","async","submitForm","Date","parse","value","status","createSubject","status_code","go","__exports__"],"sourceRoot":""}