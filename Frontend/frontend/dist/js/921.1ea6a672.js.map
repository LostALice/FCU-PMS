{"version":3,"file":"js/921.1ea6a672.js","mappings":"y/BAwEI,MAAMA,GAAkBC,EAAAA,EAAAA,IAAIC,aAAa,oBACnCC,GAAcF,EAAAA,EAAAA,IAAI,IAClBG,GAAUH,EAAAA,EAAAA,IAAI,IACdI,GAAQJ,EAAAA,EAAAA,IAAI,IAEZK,GAASC,EAAAA,EAAAA,MACTC,EAAcF,EAAOG,aAAaC,MAAMC,OAAOC,UAE/CC,EAAU,CACZ,CACIC,KAAM,OACNJ,MAAO,OACPK,UAAU,GAEd,CACID,KAAM,KACNJ,MAAO,gBACPK,UAAU,GAEd,CACID,KAAM,KACNJ,MAAO,UACPK,UAAU,GAEd,CACID,KAAM,KACNJ,MAAO,UACPK,UAAU,GAEd,CACID,KAAM,KACNJ,MAAO,QACPK,UAAU,GAEd,CACID,KAAM,KACNJ,MAAO,aACPK,UAAU,IAsBlBC,eAAeC,EAAWC,GACI,GAAtBb,EAAMK,MAAMS,OAIXC,QAAQ,aAGbf,EAAMK,MAAMW,OAAOH,EAAKI,MAAM,EAAG,SAC3BC,EAAAA,EAAAA,IAAcL,EAAKM,YAPrBpB,EAAQM,MAAQ,iBAQxB,C,OA5BIV,EAAgBU,MAAQ,GACxBG,EAAQY,KAAK,CACTX,KAAM,KACNJ,MAAO,YACPK,UAAU,KAIlBW,EAAAA,EAAAA,KAAUV,UACN,MAAMW,QAAaC,EAAAA,EAAAA,IAAWpB,GAC9B,GAAKqB,MAAMC,QAAQH,GAGnB,IAAK,MAAMI,KAAKJ,EACZtB,EAAMK,MAAMe,KAAKM,EACrB,I,6yEC7HR,MAAMC,EAAc,EAEpB,O","sources":["webpack://pms/./src/components/Subject/Project/PanelView.vue","webpack://pms/./src/components/Subject/Project/PanelView.vue?05ef"],"sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"card shadow my-3\">\r\n            <div class=\"card-header py-3\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-md-6 text-nowrap\">\r\n                        <p class=\"text-primary m-0 fw-bold\" style=\"font-size: 28px;\">{{ $route.name }}</p>\r\n                    </div>\r\n                    <div class=\"col-md-6 text-md-end dataTables_filter mt-1\">\r\n                        <div class=\"btn-group\" role=\"group\" v-if=\"permissionLevel>1\">\r\n                            <router-link :to=\"`${$route.path}/new`\" class=\"btn btn-primary btn-sm d-none d-sm-inline-block shadow-none\" role=\"button\">\r\n                                <i class=\"fas fa-plus-circle fa-sm text-white-50\"></i>\r\n                                新增\r\n                            </router-link>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"card-body\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-md-6 text-nowrap\">\r\n                    </div>\r\n                    <div class=\"col-md-6\">\r\n                        <div class=\"text-md-end dataTables_filter\" id=\"dataTable_filter\">\r\n                            <label class=\"form-label\">\r\n                                <input type=\"search\" class=\"form-control form-control-sm shadow-none\" aria-controls=\"dataTable\" placeholder=\"Search\" v-model=\"searchValue\">\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"table-responsive table mt-2\" id=\"dataTable-1\" role=\"grid\" aria-describedby=\"dataTable_info\">\r\n                    <EasyDataTable v-if=\"items\" :headers=\"headers\" :items=\"items\" :search-value=\"searchValue\" show-index table-class-name=\"customize-table\" alternating>\r\n                        <template #item-name=\"item\">\r\n                            <router-link :to=\"`/project/info/${$router.currentRoute.value.params.subjectID}`\">{{ item.name }}</router-link>\r\n                        </template>\r\n                        <template #item-announcements=\"item\">\r\n                            <router-link :to=\"`/project/${item.projectID}/announcement`\">{{ item.announcements }}</router-link>\r\n                        </template>\r\n                        <template #item-student=\"item\">\r\n                            <router-link :to=\"`/project/${item.projectID}/student`\">{{ item.student }}</router-link>\r\n                        </template>\r\n                        <template #item-teacher=\"item\">\r\n                            <router-link :to=\"`/project/${item.projectID}/teacher`\">{{ item.teacher }}</router-link>\r\n                        </template>\r\n                        <template #item-group=\"item\">\r\n                            <router-link :to=\"`/project/${item.projectID}/group`\">{{ item.group }}</router-link>\r\n                        </template>\r\n                        <template #item-assignment=\"item\">\r\n                            <router-link :to=\"`/project/${item.projectID}/assignment`\">{{ item.assignment }}</router-link>\r\n                        </template>\r\n                        <template #item-operation=\"item\" v-if=\"permissionLevel>1\">\r\n                            <div class=\"btn-group\" role=\"group\">\r\n                                <button class=\"btn btn-primary shadow-none\" style=\"background: #e74a3b;\" @click=\"deleteItem(item)\">\r\n                                    <i class=\"icon ion-android-delete\"></i>\r\n                                </button>\r\n                            </div>\r\n                        </template>\r\n                    </EasyDataTable>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <AlertBlock :message=\"message\" @closeBlock=\"message=``\" />\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n    import { deleteProject } from \"@/assets/js/helper.js\"\r\n    import { getProject } from \"@/assets/js/helper.js\"\r\n    import { useRouter } from \"vue-router\"\r\n    import { onMounted } from \"vue\"\r\n    import { ref } from \"vue\"\r\n\r\n    const permissionLevel = ref(localStorage[\"permissionLevel\"])\r\n    const searchValue = ref(\"\");\r\n    const message = ref(\"\")\r\n    const items = ref([])\r\n\r\n    const router = useRouter()\r\n    const subjectUUID = router.currentRoute.value.params.subjectID\r\n\r\n    const headers = [\r\n        {\r\n            text: \"項目名稱\",\r\n            value: \"name\",\r\n            sortable: true\r\n        },\r\n        {\r\n            text: \"公告\",\r\n            value: \"announcements\",\r\n            sortable: true\r\n        },\r\n        {\r\n            text: \"學生\",\r\n            value: \"student\",\r\n            sortable: true\r\n        },\r\n        {\r\n            text: \"教授\",\r\n            value: \"teacher\",\r\n            sortable: true\r\n        },\r\n        {\r\n            text: \"小組\",\r\n            value: \"group\",\r\n            sortable: true\r\n        },\r\n        {\r\n            text: \"作業\",\r\n            value: \"assignment\",\r\n            sortable: true\r\n        },\r\n    ]\r\n\r\n    if (permissionLevel.value > 1) {\r\n        headers.push({\r\n            text: \"選項\",\r\n            value: \"operation\",\r\n            sortable: true\r\n        })\r\n    }\r\n\r\n    onMounted(async () =>{\r\n        const data = await getProject(subjectUUID)\r\n        if (!Array.isArray(data)) {\r\n            return\r\n        }\r\n        for (const i of data) {\r\n            items.value.push(i)\r\n        }\r\n    })\r\n\r\n    async function deleteItem(item) {\r\n        if (items.value.length == 1) {\r\n            message.value = \"至少保留一個項目或刪除整個專案\"\r\n            return\r\n        }\r\n        if (!confirm(\"確定刪除項目？\")) {\r\n            return\r\n        }\r\n        items.value.splice(item.index-1, 1)\r\n        await deleteProject(item.projectID)\r\n    }\r\n</script>","import script from \"./PanelView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PanelView.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["permissionLevel","ref","localStorage","searchValue","message","items","router","useRouter","subjectUUID","currentRoute","value","params","subjectID","headers","text","sortable","async","deleteItem","item","length","confirm","splice","index","deleteProject","projectID","push","onMounted","data","getProject","Array","isArray","i","__exports__"],"sourceRoot":""}