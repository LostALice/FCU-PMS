"use strict";(self["webpackChunkpms"]=self["webpackChunkpms"]||[]).push([[420],{9420:function(s,e,t){t.r(e),t.d(e,{default:function(){return N}});t(560);var l=t(3396),a=t(9242),n=t(3311),u=t(2483),r=t(4870);const i={class:"card shadow my-3"},o={class:"card-header pt-3"},c={class:"row"},v={class:"col"},b={class:"card-body"},d={class:"row"},h={class:"col"},g={class:"btn-group",role:"group"},f=(0,l._)("i",{class:"fa fa-bold"},null,-1),_=[f],p=(0,l._)("i",{class:"fa fa-italic"},null,-1),m=[p],w=(0,l._)("i",{class:"fa fa-strikethrough"},null,-1),k=[w],y=(0,l._)("i",{class:"fa fa-underline"},null,-1),$=[y],C={class:"btn-group",role:"group"},E=(0,l._)("i",{class:"fa fa-image"},null,-1),S=[E],j=(0,l._)("i",{class:"fa fa-link"},null,-1),H=[j],x=(0,l._)("i",{class:"fa fa-save"},null,-1),D={class:"row"},I={class:"col"},L=(0,l._)("hr",null,null,-1),U={class:"row"},V={class:"col"},B={class:"col border border-gray rounded"},Q=["srcdoc"],A={methods:{underline(){let s=this.$refs.ta,e=s.selectionStart,t=s.selectionEnd,l=s.value.length;s.value=s.value.substring(0,e)+`<u>${s.value.substring(e,t)}</u> `+s.value.substring(t,l),this.$refs.ta.focus()},strikethrough(){let s=this.$refs.ta,e=s.selectionStart,t=s.selectionEnd,l=s.value.length;s.value=s.value.substring(0,e)+`<s>${s.value.substring(e,t)}</s> `+s.value.substring(t,l),this.$refs.ta.focus()},italic(){let s=this.$refs.ta,e=s.selectionStart,t=s.selectionEnd,l=s.value.length;s.value=s.value.substring(0,e)+`<i>${s.value.substring(e,t)}</i> `+s.value.substring(t,l),this.$refs.ta.focus()},bold(){let s=this.$refs.ta,e=s.selectionStart,t=s.selectionEnd,l=s.value.length;s.value=s.value.substring(0,e)+`<b>${s.value.substring(e,t)}</b> `+s.value.substring(t,l),this.$refs.ta.focus()},image(){let s=this.$refs.ta,e=s.selectionStart,t=s.selectionEnd,l=s.value.length;s.value=s.value.substring(0,e)+`<img src="${s.value.substring(e,t)}"></img> `+s.value.substring(t,l),this.$refs.ta.focus()},url(){let s=this.$refs.ta,e=s.selectionStart,t=s.selectionEnd,l=s.value.length;s.value=s.value.substring(0,e)+`<a href="${s.value.substring(e,t)}" target="_blank">${s.value.substring(e,t)}</a> `+s.value.substring(t,l),this.$refs.ta.focus()},onEnter(){let s=this.$refs.ta;s.value+="<br>"},submitEvent(){}}};var K=Object.assign(A,{__name:"NewView",setup(s){const e=(0,r.iH)(""),t=(0,r.iH)(""),f=(0,r.iH)(""),p=(0,u.tv)(),w=p.currentRoute.value.params.projectID;async function y(){if(""==f.value)return void(e.value="標題不能為空");const s=await(0,n.k4)(w,f.value,t.value);400!=s.status_code?p.push(`/project/${w}/announcement`):e.value="SQLInjectionCheck: "+s["SQLInjectionCheck"]}return(s,n)=>{const u=(0,l.up)("AlertBlock");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("form",null,[(0,l._)("div",i,[(0,l._)("div",o,[(0,l._)("div",c,[(0,l._)("div",v,[(0,l.wy)((0,l._)("input",{class:"form-control w-100 shadow-none",type:"text",placeholder:"標題","onUpdate:modelValue":n[0]||(n[0]=s=>f.value=s)},null,512),[[a.nr,f.value]])])])]),(0,l._)("div",b,[(0,l._)("div",d,[(0,l._)("div",h,[(0,l._)("div",g,[(0,l._)("button",{class:"btn btn-primary shadow-none",type:"button",onClick:n[1]||(n[1]=(...e)=>s.bold&&s.bold(...e))},_),(0,l._)("button",{class:"btn btn-primary shadow-none",type:"button",onClick:n[2]||(n[2]=(...e)=>s.italic&&s.italic(...e))},m),(0,l._)("button",{class:"btn btn-primary shadow-none",type:"button",onClick:n[3]||(n[3]=(...e)=>s.strikethrough&&s.strikethrough(...e))},k),(0,l._)("button",{class:"btn btn-primary shadow-none",type:"button",onClick:n[4]||(n[4]=(...e)=>s.underline&&s.underline(...e))},$)]),(0,l._)("div",C,[(0,l._)("button",{class:"btn btn-primary shadow-none",type:"button",onClick:n[5]||(n[5]=(...e)=>s.image&&s.image(...e))},S),(0,l._)("button",{class:"btn btn-primary shadow-none",type:"button",onClick:n[6]||(n[6]=(...e)=>s.url&&s.url(...e))},H)])]),(0,l._)("div",{class:"col",style:{"text-align":"right"}},[(0,l._)("div",{class:"btn-group",role:"group"},[(0,l._)("button",{class:"btn btn-primary shadow-none",onClick:y},[x,(0,l.Uk)("   儲存 ")])])])]),(0,l._)("div",D,[(0,l._)("div",I,[L,(0,l._)("div",U,[(0,l._)("div",V,[(0,l.wy)((0,l._)("textarea",{class:"form-control shadow-none",rows:"19","onUpdate:modelValue":n[7]||(n[7]=s=>t.value=s),placeholder:'編輯器支持HTML 語法\n圖片 <img src="圖片網址"></img>\n連結 <a href="網址"></a>',ref:"ta",onKeypress:n[8]||(n[8]=(0,a.D2)(((...e)=>s.onEnter&&s.onEnter(...e)),["enter"]))},"\r\n                                    ",544),[[a.nr,t.value]])]),(0,l._)("div",B,[(0,l._)("iframe",{srcdoc:t.value,class:"h-100"},null,8,Q)])])])])])])]),(0,l.Wm)(u,{message:e.value,onCloseBlock:n[9]||(n[9]=s=>e.value="")},null,8,["message"])])}}});const M=K;var N=M}}]);
//# sourceMappingURL=420.f45d3942.js.map