{"version":3,"file":"js/600.ff947be2.js","mappings":"i1GA+NI,MAAMA,GAAmBC,EAAAA,EAAAA,IAAI,IACvBC,GAAUD,EAAAA,EAAAA,IAAI,IACdE,IAAOF,EAAAA,EAAAA,IAAI,IACXG,IAAOH,EAAAA,EAAAA,IAAI,IAEXI,IAAgBJ,EAAAA,EAAAA,IAAI,IACpBK,IAAYL,EAAAA,EAAAA,IAAI,IAChBM,IAAYN,EAAAA,EAAAA,IAAI,IAEhBO,IAAeP,EAAAA,EAAAA,KAAI,GACnBQ,IAASR,EAAAA,EAAAA,IAAI,GAEbS,IAAUT,EAAAA,EAAAA,IAAI,CAChB,CACIU,KAAM,KACNC,MAAO,OACPC,UAAU,KAIZC,IAASC,EAAAA,EAAAA,MACTC,GAAcF,GAAOG,aAAaL,MAAMM,OAAOC,UAUrDC,eAAeC,KACX,GAAkB,IAAdlB,GAAKS,MAIT,GAAIH,GAAOG,MAAQ,KAAOH,GAAOG,MAAQ,EACrCV,EAAQU,MAAQ,wBAGpB,GAAkB,IAAdR,GAAKQ,MAIT,GAAkC,GAA9BP,GAAcO,MAAMU,OAAxB,CAKId,GAAaI,MACbZ,EAAiBY,MAAQ,IAGzBZ,EAAiBY,MAAQL,GAAUK,MAAMW,WAE7CC,QAAQC,IAAIzB,EAAiBY,OAC7B,IAAK,MAAMc,KAAKrB,GAAcO,MAAO,CACjC,MAAMe,QAAeC,EAAAA,EAAAA,IAAcZ,GAAaU,EAAEG,UAAW1B,GAAKS,MAAOH,GAAOG,MAAOR,GAAKQ,MAAOZ,EAAiBY,OACpH,GAA0B,KAAtBe,EAAOG,YAEP,YADA5B,EAAQU,MAAQ,sBAAwBe,EAAO,qBAGvD,CACAb,GAAOiB,IAAI,EAhBX,MAFI7B,EAAQU,MAAQ,cAJhBV,EAAQU,MAAQ,gBARhBV,EAAQU,MAAQ,QA+BxB,C,OAzCAoB,EAAAA,EAAAA,KAAUZ,UACN,MAAMa,QAAaC,EAAAA,EAAAA,IAAalB,IAC3BmB,MAAMC,QAAQH,KAGnB3B,GAAUM,MAAQqB,EAAI,I,0kOCxP9B,MAAMI,GAAc,GAEpB,S","sources":["webpack://pms/./src/components/Assignment/NewView.vue","webpack://pms/./src/components/Assignment/NewView.vue?6d5c"],"sourcesContent":["<template>\r\n    <div\r\n    @dragover.prevent\r\n    @dragenter.prevent\r\n    @dragleave.prevent\r\n    @drop=\"handleDrop\"\r\n    >\r\n        <div class=\"card shadow my-3\">\r\n            <div class=\"card-header py-3\">\r\n                <p class=\"text-primary m-0 fw-bold\" style=\"font-size: 28px;\">{{ $route.name }}</p>\r\n            </div>\r\n            <div class=\"card-body mh-100\">\r\n                <div class=\"row\">\r\n                    <div class=\"col\">\r\n                        <div class=\"row\">\r\n                            <div class=\"col col-4\">\r\n                                <p style=\"font-size: 24px;\">作業名稱</p>\r\n                            </div>\r\n                            <div class=\"col\">\r\n                                <input class=\"form-control w-100 shadow-none\" :class=\"!name ? 'alert-danger border-danger': ''\" type=\"text\" v-model=\"name\">\r\n                                <span :style=\"name ? 'visibility:hidden': ''\" class=\"tooltiptext\">*必需項目</span>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row\">\r\n                            <div class=\"col col-4\">\r\n                                <p style=\"font-size: 24px;\">權重(%)</p>\r\n                            </div>\r\n                            <div class=\"col\">\r\n                                <input class=\"form-control w-100 shadow-none\" :class=\"!weight ? 'alert-danger border-danger': ''\" type=\"number\" v-model=\"weight\" min=\"0\" max=\"100\">\r\n                                <span :style=\"weight ? 'visibility:hidden': ''\" class=\"tooltiptext\">*必需項目</span>\r\n                                <span :style=\"weight <= 100 && weight >= 1 ? 'visibility:hidden': ''\" class=\"tooltiptext\"> *權重需至少大於1% 少於等於100%</span>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row\">\r\n                            <div class=\"col col-4\">\r\n                                <p style=\"font-size: 24px;\">截止繳交日期</p>\r\n                            </div>\r\n                            <div class=\"col\">\r\n                                <input class=\"form-control w-100 shadow-none\" :class=\"!date ? 'alert-danger border-danger': ''\" type=\"datetime-local\" v-model=\"date\">\r\n                                <span :style=\"date ? 'visibility:hidden': ''\" class=\"tooltiptext\">*必需項目</span>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row\">\r\n                            <div class=\"col col-4\">\r\n                                <p style=\"font-size: 24px;\">接受文件類型</p>\r\n                            </div>\r\n                            <br>\r\n                            <div class=\"col pt-1\">\r\n                                <div class=\"table-responsive border rounded-1\">\r\n                                    <table class=\"table\">\r\n                                        <tbody>\r\n                                            <tr>\r\n                                                <td>\r\n                                                    <div class=\"form-check\">\r\n                                                        <input type=\"checkbox\" v-model=\"fileTypesAll\" value=\"*\" class=\"form-check-input shadow-none\" />\r\n                                                        <label class=\"form-check-label\">任何文件<br /></label>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <div class=\"form-check\">\r\n                                                        <input type=\"checkbox\" v-model=\"fileTypes\" :disabled=\"fileTypesAll\" value=\"text/*\" class=\"form-check-input shadow-none\" />\r\n                                                        <label class=\"form-check-label\">文字<br /></label>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <div class=\"form-check\">\r\n                                                        <input type=\"checkbox\" v-model=\"fileTypes\" :disabled=\"fileTypesAll\" value=\"audio/*\" class=\"form-check-input shadow-none\" />\r\n                                                        <label class=\"form-check-label\">音樂<br /></label>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <div class=\"form-check\">\r\n                                                        <input type=\"checkbox\" v-model=\"fileTypes\" :disabled=\"fileTypesAll\" value=\"image/*\" class=\"form-check-input shadow-none\" />\r\n                                                        <label class=\"form-check-label\">圖片<br /></label>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <div class=\"form-check\">\r\n                                                        <input type=\"checkbox\" v-model=\"fileTypes\" :disabled=\"fileTypesAll\" value=\"video/*\" class=\"form-check-input shadow-none\" />\r\n                                                        <label class=\"form-check-label\">影片<br /></label>\r\n                                                    </div>\r\n                                                </td>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <td>\r\n                                                    <div class=\"form-check\">\r\n                                                        <input type=\"checkbox\" v-model=\"fileTypes\" :disabled=\"fileTypesAll\" value=\".txt\" class=\"form-check-input shadow-none\" />\r\n                                                        <label class=\"form-check-label\">.txt</label>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <div class=\"form-check\">\r\n                                                        <input type=\"checkbox\" v-model=\"fileTypes\" :disabled=\"fileTypesAll\" value=\".acc\" class=\"form-check-input shadow-none\" />\r\n                                                        <label class=\"form-check-label\">.acc</label>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <div class=\"form-check\">\r\n                                                        <input type=\"checkbox\" v-model=\"fileTypes\" :disabled=\"fileTypesAll\" value=\".jpg\" class=\"form-check-input shadow-none\" />\r\n                                                        <label class=\"form-check-label\">.jpg/jpeg<br /></label>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <div class=\"form-check\">\r\n                                                        <input type=\"checkbox\" v-model=\"fileTypes\" :disabled=\"fileTypesAll\" value=\".mp4\" class=\"form-check-input shadow-none\" />\r\n                                                        <label class=\"form-check-label\">.mp4</label>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <div class=\"form-check\">\r\n                                                        <input type=\"checkbox\" v-model=\"fileTypes\" :disabled=\"fileTypesAll\" value=\".docs.doc\" class=\"form-check-input shadow-none\" />\r\n                                                        <label class=\"form-check-label\">.docs/doc</label>\r\n                                                    </div>\r\n                                                </td>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <td>\r\n                                                    <div class=\"form-check\">\r\n                                                        <input type=\"checkbox\" v-model=\"fileTypes\" :disabled=\"fileTypesAll\" value=\".pdf\" class=\"form-check-input shadow-none\" />\r\n                                                        <label class=\"form-check-label\">.pdf</label>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <div class=\"form-check\">\r\n                                                        <input type=\"checkbox\" v-model=\"fileTypes\" :disabled=\"fileTypesAll\" value=\".flac\" class=\"form-check-input shadow-none\" />\r\n                                                        <label class=\"form-check-label\">.flac<br /></label>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <div class=\"form-check\">\r\n                                                        <input type=\"checkbox\" v-model=\"fileTypes\" :disabled=\"fileTypesAll\" value=\".png\" class=\"form-check-input shadow-none\" />\r\n                                                        <label class=\"form-check-label\">.png<br /></label>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <div class=\"form-check\">\r\n                                                        <input type=\"checkbox\" v-model=\"fileTypes\" :disabled=\"fileTypesAll\" value=\".mov\" class=\"form-check-input shadow-none\" />\r\n                                                        <label class=\"form-check-label\">.mov</label>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <div class=\"form-check\">\r\n                                                        <input type=\"checkbox\" v-model=\"fileTypes\" :disabled=\"fileTypesAll\" value=\".xlsx.xls\" class=\"form-check-input shadow-none\" />\r\n                                                        <label class=\"form-check-label\">.xlsx/xls</label>\r\n                                                    </div>\r\n                                                </td>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <td>\r\n                                                    <div class=\"form-check\">\r\n                                                        <input type=\"checkbox\" v-model=\"fileTypes\" :disabled=\"fileTypesAll\" value=\".csv\" class=\"form-check-input shadow-none\" />\r\n                                                        <label class=\"form-check-label\">.csv</label>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <div class=\"form-check\">\r\n                                                        <input type=\"checkbox\" v-model=\"fileTypes\" :disabled=\"fileTypesAll\" value=\".mp3\" class=\"form-check-input shadow-none\" />\r\n                                                        <label class=\"form-check-label\">.mp3</label>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <div class=\"form-check\">\r\n                                                        <input type=\"checkbox\" v-model=\"fileTypes\" :disabled=\"fileTypesAll\" value=\".svg\" class=\"form-check-input shadow-none\" />\r\n                                                        <label class=\"form-check-label\">.svg</label>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <div class=\"form-check\">\r\n                                                        <input type=\"checkbox\" v-model=\"fileTypes\" :disabled=\"fileTypesAll\" value=\".avi\" class=\"form-check-input shadow-none\" />\r\n                                                        <label class=\"form-check-label\">.avi</label>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <div class=\"form-check\">\r\n                                                        <input type=\"checkbox\" v-model=\"fileTypes\" :disabled=\"fileTypesAll\" value=\".pptx\" class=\"form-check-input shadow-none\" />\r\n                                                        <label class=\"form-check-label\">.pptx/ppt</label>\r\n                                                    </div>\r\n                                                </td>\r\n                                            </tr>\r\n                                            <tr></tr>\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <br>\r\n                        <div class=\"row\">\r\n                            <div class=\"col col-4\">\r\n                                <p style=\"font-size: 24px;\">小組</p>\r\n                            </div>\r\n                            <div class=\"col\">\r\n                                <EasyDataTable\r\n                                :class=\"!groupSelected ? 'alert-danger border-danger': ''\"\r\n                                :headers=\"headers\"\r\n                                :items=\"groupList\"\r\n                                v-model:items-selected=\"groupSelected\"\r\n                                show-index alternating />\r\n                                <span :style=\"groupSelected ? 'visibility:hidden': ''\" class=\"tooltiptext\">*必需項目</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <br />\r\n                <div class=\"row\">\r\n                    <div class=\"col\" style=\"text-align: right;\">\r\n                        <button class=\"btn btn-primary shadow-none\" type=\"button\" @click=\"saveAssignment\">\r\n                            <i class=\"fa fa-save\"></i> 儲存\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <AlertBlock :message=\"message\" @closeBlock=\"message=``\" />\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n    import { newAssignment } from \"@/assets/js/helper.js\"\r\n    import { getGroupData} from \"@/assets/js/helper.js\"\r\n    import { useRouter } from \"vue-router\"\r\n    import { onMounted } from \"vue\"\r\n    import { ref } from \"vue\"\r\n\r\n    const allowedFileTypes = ref(\"\")\r\n    const message = ref(\"\")\r\n    const name = ref(\"\")\r\n    const date = ref(\"\")\r\n\r\n    const groupSelected = ref([])\r\n    const groupList = ref([])\r\n    const fileTypes = ref([])\r\n\r\n    const fileTypesAll = ref(false)\r\n    const weight = ref(0)\r\n\r\n    const headers = ref([\r\n        {\r\n            text: \"小組\",\r\n            value: \"name\",\r\n            sortable: true\r\n        },\r\n    ])\r\n\r\n    const router = useRouter()\r\n    const projectUUID = router.currentRoute.value.params.projectID\r\n\r\n    onMounted(async () => {\r\n        const data = await getGroupData(projectUUID)\r\n        if (!Array.isArray(data)) {\r\n            return\r\n        }\r\n        groupList.value = data\r\n    })\r\n\r\n    async function saveAssignment() {\r\n        if (name.value == \"\") {\r\n            message.value = \"未填作業名稱\"\r\n            return\r\n        }\r\n        if (weight.value > 100 || weight.value < 1) {\r\n            message.value = \"權重需大於1% 少於等於100%\"\r\n            return\r\n        }\r\n        if (date.value == \"\") {\r\n            message.value = \"未填截止繳交日期\"\r\n            return\r\n        }\r\n        if (groupSelected.value.length == 0) {\r\n            message.value = \"至少選擇1組\"\r\n            return\r\n        }\r\n\r\n        if (fileTypesAll.value) {\r\n            allowedFileTypes.value = \"*\"\r\n        }\r\n        else {\r\n            allowedFileTypes.value = fileTypes.value.toString()\r\n        }\r\n        console.log(allowedFileTypes.value)\r\n        for (const i of groupSelected.value) {\r\n            const status = await newAssignment(projectUUID, i.groupUUID, name.value, weight.value, date.value, allowedFileTypes.value)\r\n            if (status.status_code == 400) {\r\n                message.value = \"SQLInjectionCheck: \" + status[\"SQLInjectionCheck\"]\r\n                return\r\n            }\r\n        }\r\n        router.go(-1)\r\n    }\r\n</script>\r\n","import script from \"./NewView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./NewView.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["allowedFileTypes","ref","message","name","date","groupSelected","groupList","fileTypes","fileTypesAll","weight","headers","text","value","sortable","router","useRouter","projectUUID","currentRoute","params","projectID","async","saveAssignment","length","toString","console","log","i","status","newAssignment","groupUUID","status_code","go","onMounted","data","getGroupData","Array","isArray","__exports__"],"sourceRoot":""}